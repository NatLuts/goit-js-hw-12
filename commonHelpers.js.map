{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/js/messages.js","../src/main.js"],"sourcesContent":["import Axios from 'axios';\n\nconst API_KEY = '42817939-fb8caefadf90676475c3fc719';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function getPhotos(q, page){\n  const params = {\n    key: API_KEY,\n    q,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page,\n    per_page: 15,\n  };\n\n  const url = `${BASE_URL}`\n  const response = await Axios.get(url, {params});\n  return response.data\n}\n\n","export function createMarkup(arr) {\n    return arr\n      .map(arr => {\n        const {\n          webformatURL,\n          tags,\n          largeImageURL,\n          likes,\n          views,\n          comments,\n          downloads,\n        } = arr;\n        return ` <li class=\"gallery-item\"> \n                <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img  \n                  class=\"gallery-image\"\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                />\n              </a>\n                <ul class=\"property-list\">\n      <li class=\"list-property-item\"><strong>Likes</strong> <br> ${likes}</li>\n      <li class=\"list-property-item\"><strong>Views</strong> <br> ${views}</li>\n      <li class=\"list-property-item\"><strong>Comments</strong> <br> ${comments}</li>\n      <li class=\"list-property-item\"><strong>Downloads</strong> <br> ${downloads}</li>\n    </ul>\n            </li>`;\n      })\n      .join('');\n  }\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function showEmptyInputToast() {\n    return iziToast.error({\n      title: '',\n      backgroundColor: '#c55f5f',\n      titleColor: '#fff',\n      messageColor: '#fff',\n      message: 'Please write your request',\n      color: '#fff',\n      position: 'topRight',\n      progressBarColor: '#B51B1B',\n    });\n  }\n  \n  export function showErrorToast() {\n    return iziToast.error({\n      title: '',\n      backgroundColor: '#EF4040',\n      titleColor: '#fff',\n      messageColor: '#fff',\n      message:\n        'Sorry, there are no images matching <br/> your search query. Please, try again!',\n      color: '#fff',\n      position: 'topRight',\n      progressBarColor: '#B51B1B',\n    });\n  }\n  \n  export function messageOnLastPage() {\n    return iziToast.warning({\n    message: `We're sorry, but you've reached the end of search results`,\n    backgroundColor: 'rgb(255, 160, 0)',\n    color: '#fff',\n    position: 'topRight',\n    })\n    \n  }\n  \n  export function messageTotalResult(total) {\n    return iziToast.success({\n      message: `We found ${total} photos`,\n      backgroundColor: 'rgb(89, 161, 13)',\n      color: '#fff',\n      position: 'topRight',\n      })\n    \n  }\n  ","\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\nimport { showEmptyInputToast, showErrorToast, messageOnLastPage, messageTotalResult } from './js/messages';\n\nconst gallery = document.querySelector('.js-gallery ');\nconst form = document.querySelector('.js-search-form');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.js-load-more');\n\nlet searchQuery;\nlet page;\nlet maxPage;\nlet perPage = 15;\n\nform.addEventListener('submit', onFormSubmit);\nloadMoreBtn.addEventListener('click', onBtnClick);\n\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  page = 1;\n  searchQuery = e.currentTarget.elements['user-search-query'].value.trim();\n  gallery.innerHTML = '';\n\n  if (!searchQuery) {\n    showEmptyInputToast();\n    hideLoader();\n    return;\n  }\n\n  try {\n    const data = await getPhotos(searchQuery, page);\n    if (data.hits.length === 0) return showErrorToast();\n\n    gallery.innerHTML = createMarkup(data.hits);\n    messageTotalResult(data.total);\n    refreshLightbox();\n   \n\n    if (data.total < perPage) {\n      loadMoreBtnHide();\n    } else {\n      loadMoreBtnShow();\n    }\n  } catch (error) {\n  } finally {\n    hideLoader();\n  }\n  e.target.reset();\n}\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nfunction refreshLightbox() {\n  lightbox.refresh();\n}\n\nasync function onBtnClick() {\n  page += 1;\n  showLoader();\n\n  try {\n    const data = await getPhotos(searchQuery, page, perPage);\n    maxPage = Math.ceil(data.total / perPage);\n    const markup = createMarkup(data.hits);\n    gallery.insertAdjacentHTML('beforeend', markup);\n    refreshLightbox();\n   \n\n    if (maxPage === page) {\n      loadMoreBtnHide();\n      messageOnLastPage();\n    }\n  } catch {\n    showError('Error');\n  } finally {\n    hideLoader();\n  }\n  scroll();\n}\n\nfunction scroll() {\n  const cardElem = gallery.querySelector('.gallery-item')\n  const height = cardElem.getBoundingClientRect().height;\n  scrollBy({\n    behavior: 'smooth',\n    top: height,\n  });\n}\n\nfunction showLoader() {\n  return loader.classList.remove('is-hidden');\n}\n\nfunction hideLoader() {\n  return loader.classList.add('is-hidden');\n}\n\nfunction loadMoreBtnShow() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nfunction loadMoreBtnHide() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n\n"],"names":["API_KEY","BASE_URL","getPhotos","q","page","params","url","Axios","createMarkup","arr","webformatURL","tags","largeImageURL","likes","views","comments","downloads","showEmptyInputToast","iziToast","showErrorToast","messageOnLastPage","messageTotalResult","total","gallery","form","loader","loadMoreBtn","searchQuery","maxPage","perPage","onFormSubmit","onBtnClick","e","hideLoader","data","refreshLightbox","loadMoreBtnHide","loadMoreBtnShow","lightbox","SimpleLightbox","showLoader","markup","scroll","height"],"mappings":"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"}